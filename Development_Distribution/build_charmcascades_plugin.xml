<?xml version="1.0" encoding="iso-8859-1"?>
<project name="Build Charm Cascades Plugin" default="Build Charm Cascades JAR">

	<import file="common_plugin_targets.xml" />

	<target name="Build Charm Cascades JAR" depends="Build Charm Cascades Module">
		<property file="${classpath.file}" />
		<jar destfile="${plugins.dir}/charmcascades.jar">
			<manifest>
				<attribute name="Built-By" value="${user.name}" />
				<attribute name="Class-Path" value="${module.classpath}" />
			</manifest>
			<fileset dir="${class.dir}" includes="**/*" />
			<fileset dir="${resource.dir}" includes="**/*" />
		</jar>
	</target>
	
	<target name="Build Charm Cascades Module">
		<variable name="projectset" value="Charm_Cascades" />
		<variable name="module.name" value="charmcascades" />
		
		<variable name="module.dir" value="${build.dir}/${module.name}" />
		<variable name="class.dir" value="${module.dir}/classes" />
		<variable name="library.dir" value="${build.dir}/libraries/${module.name}" />
		<variable name="resource.dir" value="${module.dir}/resources" />
		<variable name="classpath.file" value="${module.dir}/classpath" />
		
		<prepareModule module.name="${module.name}" />
		<buildModule projectset="${projectset}" />
		<compileClasspath projectset="${projectset}" />
		<copyResources projectset="${projectset}" />
	</target>
</project>