<?xml version="1.0" encoding="iso-8859-1"?>
<project name="Build Core plugin" default="Build Core JAR">

	<property name="projectset" value="Lib_Thirdparty,Lib,Lib_Gui,Lib_Workflow,Platform,Anathema" />
	<property name="module.name" value="core" />

	<import file="common_plugin_targets.xml" />

	<target name="Build Core JAR" depends="Prepare, Build module, Compile classpath, Add version data">
		<property file="${classpath.file}" />
		<jar destfile="${build.dir}/anathema.jar">
			<manifest>
				<attribute name="Built-By" value="${user.name}" />
				<attribute name="Main-Class" value="net.sf.anathema.Anathema" />
				<attribute name="Class-Path" value="${module.classpath}" />
				<section name="net/sf/anathema/Anathema.class" />
			</manifest>
			<fileset dir="${class.dir}" includes="**/*" />
			<fileset dir="${resource.dir}" includes="**/*" />
		</jar>
	</target>

	<target name="Add version data" depends="Copy resources">
		<property file="version.properties"/>
		<propertyfile file="${resource.dir}/language/About.properties">
			<entry key="Anathema.Version.Numeric" value="${version.major}.${version.minor}" />
			<entry key="Anathema.Version.Title" value="${version.name}" />
			<entry key="Anathema.Version.Built" type="date" value="now" pattern="MM/dd/yy" />
		</propertyfile>
	</target>
</project>