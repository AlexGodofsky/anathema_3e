<?xml version="1.0" encoding="iso-8859-1"?>
<project name="Build raw distribution" default="Distribute">

	<import file="common_distribution_targets.xml" />
		
	<property file="version.properties" />
	<property file="directories.properties" />

	<!--this can be removed once windows gets its own build-->
	<taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask" classpath="${launch4j.dir}/launch4j.jar
	    :${launch4j.dir}/xstream.jar" />
	
	<target name="Distribute" depends="Build Bootloader, Build Plugins, Build Windows executable, Copy Text, Copy Extras, Build ZIP" />

	<target name="Build ZIP">
		<zip destfile="anathema_v${version.major}.${version.minor}.zip">
			<fileset dir="${build.dir}" includes="anathema.jar" />
			<fileset dir="${files.dir}" includes="**/*" />
			<zipfileset dir="${plugins.dir}/" prefix="plugins" includes="*" />
			<zipfileset dir="${libraries.dir}" prefix="lib" includes="*" />
		</zip>
	</target>

	<target name="Copy Extras">
		<copy todir="${files.dir}" file="linux/anathema.sh" />
	</target>
	
	<!--this can be removed once windows gets its own build-->
	<target name="Build Windows executable">
			<property file="version.properties" />
			<property name="versionString" value="${version.major}.${version.minor}.${version.revision}.0" />
			<launch4j configFile="windows/launch4j.xml" outfile="${files.dir}/anathema.exe" fileVersion="${versionString}" productVersion="${versionString}" txtFileVersion="${version.text}" txtProductVersion="${version.text}" />
		</target>
	

</project>