task copyAnathemaModules(type: Copy) {
    dependsOn subprojects.assemble
    subprojects.each {
        def projectName = it.name
        from "$projectName/build/libs/${projectName}.jar"
    }
    into pluginsDir
    exclude "**/anathema.jar"
}

task copyExternalDependencies(type: Copy) {
    from {
        Set allDependencies = []
        subprojects.each { project ->
            def moduleDependencies = project.configurations.compile.findAll { File dependency ->
                return dependency.absolutePath.contains('cache')
            }
            allDependencies.addAll moduleDependencies
        }
        return allDependencies
    }
    into dependenciesDir
    exclude "**/jfxrt.jar"
}