subprojects {
  apply plugin: 'java'
  apply plugin: 'eclipse'

  sourceCompatibility = 1.6

  if (!isDataPlugin(project)) {
    sourceSets {
      main {
        java {
          srcDir 'src'
        }
      }
    }
  }
  else {
    sourceSets {
      main {
        resources {
          srcDir 'resources'
        }
      }
    }
  }
}

version_major = 2
version_minor = 1
version_revision = 4

task buildZip(type: Zip) {
  archiveName = "Anathema_v$version_major.$version_minor.${version_revision}.zip"
  from(':Anathema/build'){
    include 'anathema.jar'
  }
  //< fileset dir = "${files.dir}" includes = "**/*" / >
  //< zipfileset dir = "${plugins.dir}/" prefix = "plugins" includes = "*" / >
  //< zipfileset dir = "${libraries.dir}" prefix = "lib" includes = "*" / >
}

boolean isDataPlugin(project) {
  project.name.startsWith('Blog') || project.name.startsWith('Book') || project.name.startsWith('Box')
}